# ğŸ“± Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù€ Authentication Ù„Ù„Ù€ Frontend (Smart Input)

Ù„Ù‚Ø¯ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙŠØ±ÙØ± Ù„ÙŠÙƒÙˆÙ† "Ø°ÙƒÙŠÙ‹Ø§" ÙÙŠ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª. Ù„Ù… ØªØ¹Ø¯ Ø¨Ø­Ø§Ø¬Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ `verificationMethod`. Ø§Ù„Ù†Ø¸Ø§Ù… Ø³ÙŠÙƒØªØ´Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù‡Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ù… Ø±Ù‚Ù… Ù‡Ø§ØªÙ.

---

## ğŸš€ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Smart Input)

1. **Ø¥Ù„ØºØ§Ø¡** `verificationMethod` Ù…Ù† Ø§Ù„Ù€ Request Body.
2. **Ø¯Ù…Ø¬** Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙˆØ§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ÙÙŠ Ø­Ù‚Ù„ ÙˆØ§Ø­Ø¯ ÙŠØ³Ù…Ù‰ `identifier`.
3. Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙØ­Øµ Ø§Ù„Ù€ `identifier`:
    - Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¥ÙŠÙ…ÙŠÙ„ ğŸ“§ -> ÙŠØ±Ø³Ù„ ÙƒÙˆØ¯ OTP Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„.
    - Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ø§ØªÙ ğŸ“± -> ÙŠØ±Ø¯ Ø¨Ù€ "Please verify via SMS" Ù„ØªÙ‚ÙˆÙ… Ø£Ù†Øª Ø¨Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ø¨Ø± Firebase.

---

## ï¿½ ØªØ¯ÙÙ‚ Ø§Ù„Ø¹Ù…Ù„ (Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ØªØ¯ÙÙ‚ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¯Ø®Ù„ Ø¥ÙŠÙ…ÙŠÙ„ Ø£Ùˆ Ø±Ù‚Ù… Ù‡Ø§ØªÙ                           â”‚
â”‚                          â†“                                  â”‚
â”‚  Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ±Ø³Ù„ Ù„Ù„Ø³ÙŠØ±ÙØ±: { "identifier": "..." }             â”‚
â”‚                          â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠÙØ­Øµ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹                       â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  Ø¥ÙŠÙ…ÙŠÙ„ØŸ â”€â”€â”€â”€â†’ ÙŠØ±Ø³Ù„ OTP Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„ â”€â”€â”€â”€â†’ ÙŠÙ†ØªÙ‚Ù„ Ù„ØµÙØ­Ø©   â”‚   â”‚
â”‚  â”‚               ÙˆÙŠØ±Ø¬Ø¹ success          Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯    â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  Ù‡Ø§ØªÙØŸ â”€â”€â”€â”€â†’ ÙŠØ±Ø¬Ø¹ success + phone â”€â”€â”€â”€â†’ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚    â”‚   â”‚
â”‚  â”‚               "Please verify via SMS"   ÙŠØ±Ø³Ù„ OTP    â”‚   â”‚
â”‚  â”‚                                         Ø¹Ø¨Ø± Firebase â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Ø¥Ø°Ø§ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ SMS Ø¹Ø¨Ø± Firebase:                     â”‚   â”‚
â”‚  â”‚ - ÙŠØ¸Ù‡Ø± Snackbar: "ÙØ´Ù„ØŒ Ø­Ø§ÙˆÙ„ Ø¨Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„"              â”‚   â”‚
â”‚  â”‚ - ÙŠØ¨Ù‚Ù‰ ÙÙŠ Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø©                               â”‚   â”‚
â”‚  â”‚ - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¯Ø®Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙØ¹Ø¯ÙÙ‘Ù„Ø©

### 1. `AuthData` Model
ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ `identifier`:
```dart
class AuthData {
  final String? identifier; // Ø¥ÙŠÙ…ÙŠÙ„ Ø£Ùˆ Ø±Ù‚Ù… Ù‡Ø§ØªÙ
  // ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„
}
```

### 2. `InputTypeHelper` (Ø¬Ø¯ÙŠØ¯)
Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„:
```dart
InputTypeHelper.isPhoneNumber(input) // true/false
InputTypeHelper.isEmail(input) // true/false
InputTypeHelper.formatPhoneNumber(phone) // +201234567890
```

### 3. `LoginStepOneController`
- ÙŠØ±Ø³Ù„ `identifier` Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† `email`
- ÙŠÙØ­Øµ Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
- Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ø§ØªÙ: ÙŠØ±Ø³Ù„ OTP Ø¹Ø¨Ø± Firebase
- Ø¥Ø°Ø§ ÙØ´Ù„: ÙŠØ¸Ù‡Ø± snackbar

### 4. `ForgetpasswordController`
- Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚

### 5. `LoginController`
- ÙŠØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙˆØ¯ SMS Ø¹Ø¨Ø± Firebase Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø³ÙŠØ±ÙØ±

---

## ğŸ“ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù€ APIs

### 1. Signup (Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯)
**Ù„Ù… ÙŠØªØºÙŠØ± Ù„Ø£Ù†Ùƒ ØªØ­ØªØ§Ø¬ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø«Ù†ÙŠÙ† Ù…Ø¹Ø§Ù‹.**
**Endpoint:** `POST /api/v1/Auth/register`

---

### 2. Login Step One (ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø£ÙˆÙ„Ù‰)
**Endpoint:** `POST /api/v1/Auth/login-step-one`

**Request Body:**
```json
{
  "identifier": "ahmed@example.com" // Ø£Ùˆ "+201234567890"
}
```

- **Ø¥Ø°Ø§ Ø£Ø±Ø³Ù„Øª Ø¥ÙŠÙ…ÙŠÙ„:** Ø§Ù„Ø³ÙŠØ±ÙØ± Ø³ÙŠØ±Ø³Ù„ ÙƒÙˆØ¯.
- **Ø¥Ø°Ø§ Ø£Ø±Ø³Ù„Øª Ù‡Ø§ØªÙ:** Ø§Ù„Ø³ÙŠØ±ÙØ± Ø³ÙŠØ±Ø¯ Ø¨Ù€:
```json
{
  "success": true,
  "message": "Please verify via SMS",
  "data": {
    "name": "Ahmed",
    "phone": "+201234567890"
  }
}
```

---

### 3. Forgot Password (Ù†Ø³ÙŠØ§Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±)
**Endpoint:** `POST /api/v1/Auth/forgot-password`

**Request Body:**
```json
{
  "identifier": "+201234567890" // Ø£Ùˆ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
}
```

---

### 4. ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ø¨Ø± Ø§Ù„Ù‡Ø§ØªÙ (Confirm Phone)
Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ø¨Ø± Firebase SMSØŒ Ù†Ø§Ø¯Ù Ù‡Ø°Ø§ Ø§Ù„Ù€ API.

**Endpoint:** `POST /api/v1/Auth/confirm-phone-verification`

**Request Body:**
```json
{
  "email": "ahmed@example.com", // Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù‡Ø§ØªÙ Ù…ÙˆØ¬ÙˆØ¯
  "phone": "+201234567890"    // Ø£Ø­Ø¯Ù‡Ù…Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨
}
```

---

## âš ï¸ Ù…Ø¹Ø§Ù„Ø¬Ø© ÙØ´Ù„ SMS

Ø¹Ù†Ø¯ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ SMS Ø¹Ø¨Ø± Firebase:

1. **Ù„Ø§ ÙŠÙˆØ¬Ø¯ Dialog** - ÙÙ‚Ø· Snackbar
2. Ø§Ù„Ø±Ø³Ø§Ù„Ø©: `"ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ SMS\nØ­Ø§ÙˆÙ„ Ø¨Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø°Ù„Ùƒ"`
3. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¨Ù‚Ù‰ ÙÙŠ Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø©
4. ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰

```dart
showCustomGetSnack(
  isGreen: false,
  text: '${otpResult.userFriendlyError}\n${StringsKeys.tryWithEmail.tr}',
);
```

---

## ğŸ“Š Dashboard Authentication
Ù†ÙØ³ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª ØªÙ†Ø·Ø¨Ù‚ Ø¹Ù„Ù‰ Ø§Ù„Ù€ Dashboard:
- `POST /api/dashboard/DashboardAuth/LoginStepOne` ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ø¢Ù† `Identifier`.

---

## âœ… Ù…Ù„Ø®Øµ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª

| Ø§Ù„Ù…Ù„Ù | Ø§Ù„ØªØºÙŠÙŠØ± |
|-------|---------|
| `auth_model.dart` | Ø¥Ø¶Ø§ÙØ© `identifier` |
| `apis_url.dart` | Ø¥Ø¶Ø§ÙØ© `confirmPhoneVerification` |
| `auth_repo.dart` | Ø¥Ø¶Ø§ÙØ© `confirmPhoneVerification` method |
| `auth_repo_impl.dart` | ØªÙ†ÙÙŠØ° `confirmPhoneVerification` |
| `input_type_helper.dart` | **Ø¬Ø¯ÙŠØ¯** - Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ |
| `login_step_one_controller.dart` | Ø¯Ø¹Ù… SMS + identifier |
| `forgetpassowrd.dart` | Ø¯Ø¹Ù… SMS + identifier |
| `login_controller.dart` | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† SMS code |
| `strings_keys.dart` | Ø¥Ø¶Ø§ÙØ© `tryWithEmail`, `emailOrPhoneHint` |
| `trenslition.dart` | Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© |
